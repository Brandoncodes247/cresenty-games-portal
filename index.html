<!DOCTYPE html>
<html lang="en">
<head>
  <title>Cresenty Games | Play Free Online Games</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Play free online games from Cresenty Studio - Play Scout X, Flappy Bird, 2048, and more online for free!">
  <meta name="keywords" content="play games online, play Scout X online, play Flappy Bird online, play 2048 online, play Pacman online, play Space Invaders online, free online games, Cresenty games">
  <meta property="og:title" content="Cresenty Games | Play Free Online Games">
  <meta property="og:description" content="Play Scout X, Flappy Bird, 2048, Pacman, and more online for free!">
  <meta property="og:image" content="favicon.png">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://cresenty.games/">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Cresenty Games | Play Free Online Games">
  <meta name="twitter:description" content="Play Scout X, Flappy Bird, 2048, Pacman, and more online for free!">
  <meta name="twitter:image" content="favicon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="manifest" href="/manifest.json">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script defer src="/service-worker-register.js"></script>
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Cresenty Games",
      "url": "https://cresenty.games/",
      "description": "Play free online games from Cresenty Studio - Play Scout X, Flappy Bird, 2048, and more online for free!",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://cresenty.games/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
  </script>
  <style>
    /* Optimized base styles */
    :root {
      --primary-color: #ff6f61;
      --secondary-color: #4cc9f0;
      --accent-color: #f72585;
      --background-color: #1e1e1e;
      --text-color: white;
      --font-primary: 'Orbitron', sans-serif;
      --font-secondary: 'Press Start 2P', cursive;
      --card-bg: rgba(51, 51, 51, 0.95);
      --header-bg: rgba(10, 10, 10, 0.95);
      --footer-bg: rgba(10, 10, 10, 0.95);
      --neon-glow: 0 0 20px rgba(255, 111, 97, 0.8);
      --glass-bg: rgba(255, 255, 255, 0.1);
      --glass-border: rgba(255, 255, 255, 0.2);
      --cyber-gradient: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-font-smoothing: antialiased;
    }

    body {
      margin: 0;
      padding: 0;
      color: var(--text-color);
      font-family: var(--font-primary);
      line-height: 1.6;
      background-color: var(--background-color);
      background-image: url('Cresenty Background image.jpg');
      background-size: cover;
      background-attachment: fixed;
      background-position: center;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Simplified header */
    header {
      background: var(--header-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      color: var(--text-color);
      padding: 30px 0;
      text-align: center;
      border-bottom: 3px solid var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      margin-bottom: 40px;
    }

    .logo {
      width: 120px;
      height: 120px;
      margin-right: 20px;
      transition: transform 0.3s ease;
    }

    .logo:hover {
      transform: scale(1.05);
    }

    h1.cresenty-pixel {
      font-family: 'Press Start 2P', cursive;
      color: #ff6b6b;
      font-size: 4rem;
      letter-spacing: 0.08em;
      text-shadow: none;
      margin: 0;
      padding: 0;
      background: none;
      animation: none;
    }

    .tagline {
      font-size: 1.2rem;
      color: #bbb;
      margin-top: 15px;
    }

    /* Optimized search */
    .search-container {
      margin: 20px auto;
      max-width: 600px;
      position: relative;
    }

    #gameSearch {
      width: 100%;
      padding: 15px 25px;
      border: 2px solid var(--primary-color);
      border-radius: 30px;
      background: rgba(30, 30, 30, 0.95);
      color: var(--text-color);
      font-family: var(--font-primary);
      font-size: 1.1rem;
      outline: none;
      transition: border-color 0.3s ease;
    }

    #gameSearch:focus {
      border-color: var(--secondary-color);
    }

    /* Optimized game container */
    .game-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 30px;
      margin: 0 auto;
      padding: 20px;
      max-width: 1400px;
    }

    .game-card {
      background: var(--card-bg);
      padding: 25px;
      border-radius: 20px;
      text-align: center;
      transition: transform 0.3s ease;
      border: 2px solid var(--primary-color);
      cursor: pointer;
    }

    .game-card:hover {
      transform: translateY(-5px);
    }

    .game-card h2 {
      color: var(--secondary-color);
      font-size: 1.8rem;
      margin-bottom: 20px;
      font-family: var(--font-secondary);
    }

    .game-card iframe {
      width: 100%;
      height: 400px;
      border: none;
      border-radius: 15px;
      background: black;
    }

    /* Simplified fullscreen overlay */
    .fullscreen-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.98);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .fullscreen-overlay iframe {
      width: 95vw;
      height: 90vh;
      border: none;
      border-radius: 15px;
    }

    .close-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 2rem;
      color: var(--primary-color);
      background: none;
      border: none;
      cursor: pointer;
    }

    /* Simplified loader */
    .loader-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.98);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 99999;
    }

    .loader-content {
      text-align: center;
    }

    .loader-content p {
      color: var(--secondary-color);
      font-size: 1.4rem;
      margin-top: 20px;
    }

    /* Simplified footer */
    footer {
      background: var(--footer-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      color: var(--text-color);
      text-align: center;
      padding: 40px 0;
      margin-top: 60px;
      border-top: 3px solid var(--primary-color);
    }

    .social-icons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    .icon {
      width: 50px;
      height: 50px;
      font-size: 24px;
      border-radius: 50%;
      background: rgba(30, 30, 30, 0.95);
      border: 2px solid var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary-color);
      text-decoration: none;
      transition: all 0.3s ease;
    }

    .icon:hover {
      background: var(--primary-color);
      color: white;
    }

    .copyright {
      color: #ccc;
      font-size: 16px;
    }

    /* Remove device-specific media queries */
    @media (max-width: 768px) {
      header {
        flex-direction: column;
        padding: 20px 0;
      }

      .logo {
        width: 100px;
        height: 100px;
        margin: 0 0 20px 0;
      }

      h1.cresenty-pixel {
        font-size: 2rem;
      }

      .game-container {
        grid-template-columns: 1fr;
        padding: 15px;
      }

      .game-card iframe {
        height: 300px;
      }
    }

    @media (max-width: 600px) {
      h1.cresenty-pixel {
        font-size: 2rem;
      }
    }

    /* Remove featured games and recently played styles */
    .game-categories {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 30px auto;
      flex-wrap: wrap;
      max-width: 1400px;
      padding: 0 20px;
    }

    .category-btn {
      padding: 12px 25px;
      border: 2px solid var(--primary-color);
      border-radius: 25px;
      background: transparent;
      color: var(--primary-color);
      font-family: var(--font-primary);
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .category-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--primary-color);
      transform: scaleX(0);
      transform-origin: right;
      transition: transform 0.3s ease;
      z-index: -1;
    }

    .category-btn:hover {
      color: white;
    }

    .category-btn:hover::before {
      transform: scaleX(1);
      transform-origin: left;
    }

    .category-btn.active {
      background: var(--primary-color);
      color: white;
    }

    @media (max-width: 768px) {
      .category-btn {
        padding: 10px 20px;
        font-size: 0.9rem;
      }
    }

    /* Update game card styles for icons */
    .game-icon {
      width: 100%;
      height: 200px;
      background: #000;
      border-radius: 15px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 15px;
      transition: transform 0.3s ease;
    }

    .game-icon img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      padding: 10px;
    }

    .game-card:hover .game-icon {
      transform: scale(1.05);
    }

    .game-card h2 {
      color: var(--secondary-color);
      font-size: 1.5rem;
      margin: 10px 0;
      font-family: var(--font-secondary);
    }

    @media (max-width: 768px) {
      .game-icon {
        height: 150px;
      }
    }

    /* Add these new styles for the share button */
    .share-section {
      text-align: center;
      margin: 50px 0;
    }

    #nativeShareBtn {
      font-size: 1.4rem;
      padding: 18px 35px;
      border-radius: 15px;
      background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
      color: #fff;
      border: none;
      cursor: pointer;
      margin-bottom: 25px;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
      position: relative;
      overflow: hidden;
      font-family: var(--font-primary);
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: bold;
    }

    #nativeShareBtn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, var(--secondary-color), var(--primary-color));
      transition: all 0.4s ease;
      z-index: 1;
    }

    #nativeShareBtn:hover::before {
      left: 0;
    }

    #nativeShareBtn span {
      position: relative;
      z-index: 2;
    }

    #nativeShareBtn:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.4);
    }

    #nativeShareBtn:active {
      transform: translateY(1px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    .game-card:focus {
      outline: 3px solid var(--secondary-color);
      box-shadow: 0 0 0 4px rgba(76,201,240,0.3);
    }

    /* Add responsive fallbacks for device compatibility */
    @media (max-width: 768px) {
      .desktop-game {
        display: none !important;
      }
    }

    @media (min-width: 769px) {
      .mobile-game {
        display: none !important;
      }
    }
  </style>
</head>
<body>
  <main>
    <header>
      <img src="Cresenty Logo.jpg" alt="Cresenty Studio Logo" class="logo" loading="eager">
      <div>
        <h1 class="cresenty-pixel">Cresenty Games</h1>
        <p class="tagline">Play our selection of free online games</p>
        <div class="search-container">
          <input type="text" id="gameSearch" placeholder="Search games..." aria-label="Search games">
        </div>
      </div>
    </header>

    <div class="progress-bar"></div>

    <section class="game-categories">
      <button class="category-btn active" data-category="all">All Games</button>
      <button class="category-btn" data-category="action">Action</button>
      <button class="category-btn" data-category="puzzle">Puzzle</button>
      <button class="category-btn" data-category="arcade">Arcade</button>
      <button class="category-btn" data-category="strategy">Strategy</button>
      <button class="category-btn" data-category="racing">Racing</button>
      <button class="category-btn" data-category="adventure">Adventure</button>
    </section>

    <section class="game-container">
      <div class="game-card" data-categories="action adventure" onclick="openFullscreen('./games/scout X/index.html')" tabindex="0" role="button" aria-label="Play Scout X">
        <div class="game-icon">
          <img src="ScoutX.jpg" alt="Scout X">
        </div>
        <h2>Scout X</h2>
      </div>

      <div class="game-card" data-categories="arcade" onclick="openFullscreen('./games/floppybird-gh-pages/index.html')" tabindex="0" role="button" aria-label="Play Flappy Bird">
        <div class="game-icon">
          <img src="Flappybird.png" alt="Flappy Bird">
        </div>
        <h2>Flappy Bird</h2>
      </div>

      <div class="game-card" data-categories="puzzle" onclick="openFullscreen('./games/2048-master/index.html')" tabindex="0" role="button" aria-label="Play 2048">
        <div class="game-icon">
          <img src="2048.png" alt="2048">
        </div>
        <h2>2048</h2>
      </div>

      <div class="game-card desktop-game" data-categories="racing" onclick="openFullscreen('./games/HexGL-master/index.html')" tabindex="0" role="button" aria-label="Play Hex-GL">
        <div class="game-icon">
          <img src="Hex-Gl.png" alt="Hex-GL">
        </div>
        <h2>Hex-GL</h2>
      </div>

      <div class="game-card" data-categories="arcade" onclick="openFullscreen('./games/pacman-master/index.html')" tabindex="0" role="button" aria-label="Play Pacman">
        <div class="game-icon">
          <img src="Pacman.png" alt="Pacman">
        </div>
        <h2>Pacman</h2>
      </div>

      <div class="game-card desktop-game" data-categories="action arcade" onclick="openFullscreen('./games/SpaceInvaders-master/index.html')" tabindex="0" role="button" aria-label="Play Space Invaders">
        <div class="game-icon">
          <img src="SpaceInvaders.png" alt="Space Invaders">
        </div>
        <h2>Space Invaders</h2>
      </div>

      <div class="game-card" data-categories="puzzle" onclick="openFullscreen('./games/hextris-gh-pages/index.html')" tabindex="0" role="button" aria-label="Play Hextris">
        <div class="game-icon">
          <img src="Hextris.png" alt="Hextris">
        </div>
        <h2>Hextris</h2>
      </div>

      <div class="game-card" data-categories="strategy" onclick="openFullscreen('./games/amongus/index.html')" tabindex="0" role="button" aria-label="Play Among Us">
        <div class="game-icon">
          <img src="Amongus.png" alt="Among Us">
        </div>
        <h2>Among Us</h2>
      </div>

      <div class="game-card desktop-game" data-categories="action" onclick="openFullscreen('./games/asciispace/index.html')" tabindex="0" role="button" aria-label="Play Asciispace">
        <div class="game-icon">
          <img src="Asciispace.png" alt="Asciispace">
        </div>
        <h2>Asciispace</h2>
      </div>

      <div class="game-card desktop-game" data-categories="action arcade" onclick="openFullscreen('./games/asteroids/index.html')" tabindex="0" role="button" aria-label="Play Asteroids">
        <div class="game-icon">
          <img src="Asteroids.png" alt="Asteroids">
        </div>
        <h2>Asteroids</h2>
      </div>

      <div class="game-card" data-categories="puzzle" onclick="openFullscreen('./games/astray/index.html')" tabindex="0" role="button" aria-label="Play Astray">
        <div class="game-icon">
          <img src="astray.png" alt="Astray">
        </div>
        <h2>Astray</h2>
      </div>

      <div class="game-card" data-categories="adventure" onclick="openFullscreen('./games/backcountry/index.html')" tabindex="0" role="button" aria-label="Play Backcountry">
        <div class="game-icon">
          <img src="Backcountry.png" alt="Backcountry">
        </div>
        <h2>Backcountry</h2>
      </div>

      <div class="game-card" data-categories="action" onclick="openFullscreen('./games/basketballstars/index.html')" tabindex="0" role="button" aria-label="Play Basketball Stars">
        <div class="game-icon">
          <img src="Basketballstars.png" alt="Basketball Stars">
        </div>
        <h2>Basketball Stars</h2>
      </div>

      <div class="game-card" data-categories="puzzle" onclick="openFullscreen('./games/blackholesquare/index.html')" tabindex="0" role="button" aria-label="Play Blackhole Square">
        <div class="game-icon">
          <img src="Blackholesquare.png" alt="Blackhole Square">
        </div>
        <h2>Blackhole Square</h2>
      </div>

      <div class="game-card" data-categories="puzzle" onclick="openFullscreen('./games/bounceback/index.html')" tabindex="0" role="button" aria-label="Play Bounceback">
        <div class="game-icon">
          <img src="Bounceback.png" alt="Bounceback">
        </div>
        <h2>Bounceback</h2>
      </div>

      <div class="game-card" data-categories="puzzle" onclick="openFullscreen('./games/breaklock/index.html')" tabindex="0" role="button" aria-label="Play Breaklock">
        <div class="game-icon">
          <img src="Breaklock.png" alt="Breaklock">
        </div>
        <h2>Breaklock</h2>
      </div>

      <div class="game-card" data-categories="arcade" onclick="openFullscreen('./games/breakout/index.html')" tabindex="0" role="button" aria-label="Play Breakout">
        <div class="game-icon">
          <img src="Breakout.png" alt="Breakout">
        </div>
        <h2>Breakout</h2>
      </div>

      <div class="game-card" data-categories="adventure" onclick="openFullscreen('./games/captaincallisto/index.html')" tabindex="0" role="button" aria-label="Play Captain Callisto">
        <div class="game-icon">
          <img src="CaptainCallisto.png" alt="Captain Callisto">
        </div>
        <h2>Captain Callisto</h2>
      </div>

      <div class="game-card" data-categories="strategy" onclick="openFullscreen('./games/chess/index.html')" tabindex="0" role="button" aria-label="Play Chess">
        <div class="game-icon">
          <img src="chess.png" alt="Chess">
        </div>
        <h2>Chess</h2>
      </div>

      <div class="game-card desktop-game" data-categories="action" onclick="openFullscreen('./games/chromaincident/index.html')" tabindex="0" role="button" aria-label="Play Chroma Incident">
        <div class="game-icon">
          <img src="chromaincident.png" alt="Chroma Incident">
        </div>
        <h2>Chroma Incident</h2>
      </div>

      <div class="game-card" data-categories="arcade" onclick="openFullscreen('./games/chrome-dino/index.html')" tabindex="0" role="button" aria-label="Play Chrome Dino">
        <div class="game-icon">
          <img src="chromedinorun.png" alt="Chrome Dino">
        </div>
        <h2>Chrome Dino</h2>
      </div>

      <div class="game-card" data-categories="puzzle" onclick="openFullscreen('./games/connect3/index.html')" tabindex="0" role="button" aria-label="Play Connect 3">
        <div class="game-icon">
          <img src="connect3.png" alt="Connect 3">
        </div>
        <h2>Connect 3</h2>
      </div>

      <div class="game-card" data-categories="strategy" onclick="openFullscreen('./games/cookieclicker/index.html')" tabindex="0" role="button" aria-label="Play Cookie Clicker">
        <div class="game-icon">
          <img src="cookieclicker.png" alt="Cookie Clicker">
        </div>
        <h2>Cookie Clicker</h2>
      </div>

      <div class="game-card" data-categories="arcade" onclick="openFullscreen('./games/crossyroad/index.html')" tabindex="0" role="button" aria-label="Play Crossy Road">
        <div class="game-icon">
          <img src="Crossyroad.png" alt="Crossy Road">
        </div>
        <h2>Crossy Road</h2>
      </div>

      <div class="game-card" data-categories="action" onclick="openFullscreen('./games/geometrydash/index.html')" tabindex="0" role="button" aria-label="Play Geometry Dash">
        <div class="game-icon">
          <img src="Geometrydash.png" alt="Geometry Dash">
        </div>
        <h2>Geometry Dash</h2>
      </div>

      <div class="game-card" data-categories="puzzle" onclick="openFullscreen('./games/tetris/index.html')" tabindex="0" role="button" aria-label="Play Tetris">
        <div class="game-icon">
          <img src="Tetris.png" alt="Tetris">
        </div>
        <h2>Tetris</h2>
      </div>

      <div class="game-card desktop-game" data-categories="racing" onclick="openFullscreen('./games/racer/index.html')" tabindex="0" role="button" aria-label="Play Racer">
        <div class="game-icon">
          <img src="Racer.png" alt="Racer">
        </div>
        <h2>Racer</h2>
      </div>

      <div class="game-card" data-categories="arcade" onclick="openFullscreen('./games/snake/index.html')" tabindex="0" role="button" aria-label="Play Snake">
        <div class="game-icon">
          <img src="Snake.png" alt="Snake">
        </div>
        <h2>Snake</h2>
      </div>

      <div class="game-card" data-categories="arcade" onclick="openFullscreen('./games/doodle-jump/index.html')" tabindex="0" role="button" aria-label="Play Doodle Jump">
        <div class="game-icon">
          <img src="Doodle jump.png" alt="Doodle Jump">
        </div>
        <h2>Doodle Jump</h2>
      </div>
    </section>

    <div class="fullscreen-overlay" id="fullscreenOverlay">
      <button class="close-btn" onclick="closeFullscreen()" aria-label="Close fullscreen">&times;</button>
      <iframe id="fullscreenIframe" allowfullscreen title="Fullscreen Game"></iframe>
    </div>

    <div class="loader-overlay" id="loaderOverlay">
      <div class="loader-content">
        <div class="pixel-loader" aria-label="Loading animation"></div>
        <p>Loading Game...</p>
      </div>
    </div>

    <section class="share-section">
      <button id="nativeShareBtn">
        <span><i class="fas fa-share-alt"></i> Share This Site</span>
      </button>
    </section>
  </main>

  <footer>
    <div class="social-icons">
      <a href="https://twitter.com/CresentyStudio" class="icon" target="_blank" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
      <a href="https://instagram.com/cresenty.studio" class="icon" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
      <a href="https://tiktok.com/@cresenty.studio" class="icon" target="_blank" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
    </div>
    <p class="copyright">&copy; 2025 Cresenty Studio. All rights reserved.</p>
  </footer>

  <script defer>
    document.addEventListener('DOMContentLoaded', function () {
      // Category filtering
      const categoryButtons = document.querySelectorAll('.category-btn');
      const gameCards = document.querySelectorAll('.game-card');
      
      categoryButtons.forEach(button => {
        button.addEventListener('click', () => {
          categoryButtons.forEach(btn => btn.classList.remove('active'));
          button.classList.add('active');
          
          const category = button.getAttribute('data-category');
          
          gameCards.forEach(card => {
            if (category === 'all') {
              card.style.display = 'block';
            } else {
              const categories = card.getAttribute('data-categories').split(' ');
              card.style.display = categories.includes(category) ? 'block' : 'none';
            }
          });
        });
      });

      // Search functionality
      const searchInput = document.getElementById('gameSearch');
      let searchTimeout;
      
      searchInput.addEventListener('input', function () {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
          const searchTerm = this.value.toLowerCase();
          const activeCategory = document.querySelector('.category-btn.active').getAttribute('data-category');
          
          gameCards.forEach(card => {
            const title = card.querySelector('h2').textContent.toLowerCase();
            const categories = card.getAttribute('data-categories');
            
            const matchesSearch = title.includes(searchTerm);
            const matchesCategory = activeCategory === 'all' || categories.includes(activeCategory);
            
            card.style.display = matchesSearch && matchesCategory ? 'block' : 'none';
          });
        }, 150);
      });

      // Lazy loading
      const lazyLoad = (iframe) => {
        if (iframe.getAttribute('data-src') && iframe.src === 'about:blank') {
          iframe.src = iframe.getAttribute('data-src');
        }
      };

      const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            lazyLoad(entry.target);
            observer.unobserve(entry.target);
          }
        });
      }, { 
        rootMargin: '100px 0px',
        threshold: 0.1
      });

      document.querySelectorAll('iframe[loading="lazy"]').forEach(frame => observer.observe(frame));

      // Fullscreen handling with proper cleanup
      window.openFullscreen = function (url) {
        const overlay = document.getElementById("fullscreenOverlay");
        const fullscreenIframe = document.getElementById("fullscreenIframe");
        const loader = document.getElementById("loaderOverlay");

        // Show loader
        loader.style.display = 'flex';
        overlay.style.display = 'flex';

        // Set iframe source
        fullscreenIframe.src = url;

        // Hide loader when game is loaded
        fullscreenIframe.onload = () => {
          loader.style.display = 'none';
        };
      };

      window.closeFullscreen = function () {
        const overlay = document.getElementById("fullscreenOverlay");
        const fullscreenIframe = document.getElementById("fullscreenIframe");
        
        // Stop all audio and video
        if (fullscreenIframe) {
          try {
            const iframeWindow = fullscreenIframe.contentWindow;
            if (iframeWindow) {
              // Stop all audio
              const audios = iframeWindow.document.getElementsByTagName('audio');
              for (let audio of audios) {
                audio.pause();
                audio.currentTime = 0;
              }
              
              // Stop all video
              const videos = iframeWindow.document.getElementsByTagName('video');
              for (let video of videos) {
                video.pause();
                video.currentTime = 0;
              }
            }
          } catch (e) {
            console.log('Error cleaning up iframe:', e);
          }
        }
        
        // Hide overlay and clear iframe
        overlay.style.display = 'none';
        if (fullscreenIframe) {
          fullscreenIframe.src = 'about:blank';
        }
      };

      // Optimized share functionality
      const shareBtn = document.getElementById('nativeShareBtn');
      if (navigator.share) {
        shareBtn.addEventListener('click', async function () {
          try {
            await navigator.share({
              title: 'Cresenty Games',
              text: 'Play free online games at Cresenty Games!',
              url: window.location.href
            });
          } catch (err) {
            console.log('Error sharing:', err);
          }
        });
      } else {
        shareBtn.style.display = 'none';
      }
    });

    // Optimized service worker registration with better error handling
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('/service-worker.js', {
          scope: '/'
        }).then(registration => {
          console.log('ServiceWorker registration successful');
          registration.update();
        }).catch(err => {
          console.log('ServiceWorker registration failed:', err);
        });
      });
    }
  </script>
</body>
</html>